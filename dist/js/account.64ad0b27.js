(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account"],{"14d9":function(t,e,s){"use strict";var n=s("23e7"),a=s("7b0b"),i=s("07fa"),r=s("3a34"),o=s("3511"),c=s("d039"),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}();n({target:"Array",proto:!0,arity:1,forced:l||u},{push:function(t){var e=a(this),s=i(e),n=arguments.length;o(s+n);for(var c=0;c<n;c++)e[s]=arguments[c],s++;return r(e,s),s}})},"286a":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"dash rounded px-3 pb-5 pt-2"},[e("div",{staticClass:"coln"},[e("div",{staticClass:"mt-5 pb-4"},[e("b-table",{attrs:{id:"my-table",fields:t.fields,outlined:"",small:"",striped:"",busy:t.getting,hover:"",items:t.items,"per-page":t.perPage,"current-page":t.currentPage,"show-empty":""},scopedSlots:t._u([{key:"cell(rsaPin)",fn:function(e){return[t._v(" "+t._s(e.item.agentId.rsaPin)+" ")]}},{key:"cell(email)",fn:function(e){return[t._v(" "+t._s(e.item.agentId.email)+" ")]}},{key:"cell(staffName)",fn:function(e){return[t._v(" "+t._s(e.item.agentId.firstName)+" "+t._s(e.item.agentId.lastName)+" ")]}},{key:"cell(id)",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}},{key:"cell(action)",fn:function(s){return[e("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:"assign-menu/"+s.item.agentId.rsaPin}},[t._v(" Assign Menu ")]),e("button",{staticClass:"btn btn-sm btn-danger mx-3",on:{click:function(e){return t.deleteStaff(s.item.agentId.rsaPin)}}},[t._v(" Delete ")])]}}])}),e("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table",size:"sm",limit:"10","page-class":"text-blue","next-class":"text-blue"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])},a=[],i=s("f4bd"),r={name:"ListAdminStaff",data(){return{getting:!1,deleting:!1,perPage:10,currentPage:1,items:[],fields:[{key:"id",label:"ID"},{key:"staffName",label:"Staff Name"},{key:"email",label:"Staff Email"},{key:"rsaPin",label:"RSA PIN"},{key:"action",label:"Actions"}]}},async beforeCreate(){try{this.getting=!0;const t="auth/get-staffs",e=await i["b"].get(t);if(this.getting=!1,!e)return;const{data:s}=e;this.items=s.data}catch(t){console.log(t),this.getting=!1}},computed:{rows(){return this.items.length}},methods:{async getStaffs(){try{this.getting=!0;const t="auth/get-staffs",e=await i["b"].get(t);if(this.getting=!1,!e)return;const{data:s}=e;this.items=s.data}catch(t){console.log(t),this.getting=!1}},async deleteStaff(t){try{const e=await this.$swal({icon:"question",title:"Are you sure you want to remove this staff from an Admin staff of this company?",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No"});if(!e.isConfirmed)return;this.deleting=!0;const s="auth/delete-staff",n=await i["b"].post(s,{rsaPin:t});if(this.deleting=!1,!n)return;const{data:a}=n;this.$swal({icon:"success",text:a.message}),this.getStaffs()}catch(e){console.log(e),this.deleting=!1}}}},o=r,c=(s("5934"),s("2877")),l=Object(c["a"])(o,n,a,!1,null,"9b6a83ee",null);e["default"]=l.exports},3511:function(t,e){var s=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw s("Maximum allowed index exceeded");return t}},"36e0":function(t,e,s){"use strict";s("fea9")},"3a34":function(t,e,s){"use strict";var n=s("83ab"),a=s("e8b5"),i=TypeError,r=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(a(t)&&!r(t,"length").writable)throw i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4835:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"dash rounded px-3 pb-5 pt-2"},[e("div",{staticClass:"coln"},[e("h4",{staticClass:"mb-4"},[t._v("Assign Staff Menu")]),e("section",{staticClass:"row justify-content-between px-4 mt-4"},[e("div",{staticClass:"col-md-4 pl-4"},[e("p",{staticClass:"border-bottom py-2"},[e("span",{staticClass:"font-weight-lighter"},[t._v("Staff RSA:")]),t._v(" "+t._s(t.staffData.rsaPin)+" ")]),e("p",{staticClass:"border-bottom py-2"},[e("span",{staticClass:"font-weight-lighter"},[t._v("Staff name:")]),t._v(" "+t._s(t.staffData.firstName)+" "+t._s(t.staffData.firstName)+" ")])]),e("form",{staticClass:"col-md-7 border-left",attrs:{action:"#"},on:{submit:function(t){t.preventDefault()}}},[e("h6",{staticClass:"mb-4"},[t._v("Choose Menus")]),t._l(t.filteredMenus,(function(s,n){return e("div",{key:n,staticClass:"form-group form-check border-bottom"},[e("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"menu"+s.id},domProps:{checked:s.checked,value:s.id},on:{change:t.selectAllSub}}),e("label",{staticClass:"form-check-label",attrs:{for:"menu"+s.id}},[t._v(t._s(s.name))]),t._l(s.subMenus,(function(n,a){return e("div",{key:a,staticClass:"form-group form-check ml-3"},[e("input",{staticClass:"form-check-input",class:"menu"+s.id,attrs:{type:"checkbox",id:"submenu"+n.id},domProps:{checked:n.checked,value:s.id+"_"+n.id},on:{change:t.selectOneSub}}),e("label",{staticClass:"form-check-label",attrs:{for:"submenu"+n.id}},[t._v(t._s(n.name))])])}))],2)})),e("div",{staticClass:"form-group mt-5 text-center px-3"},[e("button",{staticClass:"btn btn-primary btn-sm w-100",attrs:{disabled:!this.selectedMenus.length||t.assigning,type:"submit"},on:{click:function(e){return e.preventDefault(),t.assignMenu()}}},[e("span",{staticClass:"mr-3"},[t._v("Assign Menu")]),t.assigning?e("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e()])])],2)])])])},a=[],i=(s("14d9"),s("2f62")),r={name:"AssignMenu",data(){return{staffMenus:null,selectedMenus:[],staffData:null}},computed:{...Object(i["c"])(["userMenus","companyCode"]),filteredMenus(){return this.userMenus.map(t=>{const e=t.subMenus;let s=!0;const n=e.map(t=>{const e=-1!=this.staffMenus.findIndex(e=>e.menuId==t.menuId);return e?this.selectedMenus.push({userId:this.staffData.id,menuId:t.id}):s=!1,{...t,checked:e}});return t.subMenus=n,{...t,checked:s}})}},methods:{async assignMenu(){},selectAllSub(t){const e=t.target.defaultValue,s=t.target.id,n=document.querySelectorAll("."+s);if(t.target.checked){const t=this.menuList.find(t=>t.id==e);if(0==t.hasSubMenu)this.selectedMenus.push({adminId:this.adminData.adminId,status:1,menuId:e,subMenuId:null});else{for(let s=0;s<=this.selectedMenus.length;s++){const t=this.selectedMenus.findIndex(t=>t.menuId==e);t>=0&&this.selectedMenus.splice(t,1)}const t=this.menuList.find(t=>t.id==e).subMenus;for(let s=0;s<t.length;s++){const n=t[s];this.selectedMenus.push({adminId:this.adminData.adminId,status:1,menuId:e,subMenuId:n.id})}n.forEach(t=>{t.checked=!0})}}else{for(let t=0;t<=this.selectedMenus.length;t++){const t=this.selectedMenus.findIndex(t=>t.menuId==e);t>=0&&this.selectedMenus.splice(t,1)}n.forEach(t=>{t.checked=!1})}}}},o=r,c=s("2877"),l=Object(c["a"])(o,n,a,!1,null,"a3a62b2c",null);e["default"]=l.exports},5934:function(t,e,s){"use strict";s("dc71")},6772:function(t,e,s){"use strict";s("eda6")},"758d":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"dash rounded px-3 pb-5 pt-2"},[e("div",{staticClass:"coln"},[e("h4",{staticClass:"mb-4"},[t._v("Validate Company Code")]),1==t.stage?e("div",{staticClass:"form"},[e("div",{staticClass:"mt-3"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form1.companyCode,expression:"form1.companyCode"}],staticClass:"form-control input",attrs:{id:"companyCode",type:"text",placeholder:"company code"},domProps:{value:t.form1.companyCode},on:{input:function(e){e.target.composing||t.$set(t.form1,"companyCode",e.target.value)}}})]),e("button",{staticClass:"btn mt-4 w-100 button",attrs:{disabled:!t.checkReady||t.checking},on:{click:t.checkCompanyCode}},[e("span",[t._v("Check code")]),t.checking?e("span",{staticClass:"spinner-border spinner-border-sm text-light ml-3",attrs:{role:"status"}}):t._e()])]):t._e(),2==t.stage?e("div",{staticClass:"form"},[e("div",{staticClass:"mt-3"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form2.token,expression:"form2.token"}],staticClass:"form-control input",attrs:{id:"token",type:"text",placeholder:"enter token"},domProps:{value:t.form2.token},on:{input:function(e){e.target.composing||t.$set(t.form2,"token",e.target.value)}}})]),e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn fs-9 btn-link",on:{click:t.resendToken}},[t._v(" Resend Token ")])]),e("button",{staticClass:"btn mt-4 w-100 button",attrs:{disabled:!t.tokenReady||t.verifying},on:{click:t.checkToken}},[e("span",[t._v("Verify Token")]),t.verifying?e("span",{staticClass:"spinner-border spinner-border-sm text-light ml-3",attrs:{role:"status"}}):t._e()])]):t._e()])])},a=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"companyCode"}},[e("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" Company Code ")])},function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"token"}},[e("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" Enter Token ")])}],i=(s("14d9"),s("f4bd")),r={name:"ValidateCompany",data(){return{checking:!1,verifying:!1,stage:1,form1:{companyCode:null},form2:{token:null}}},computed:{checkReady(){return!!this.form1.companyCode},tokenReady(){return!!this.form2.token}},methods:{async checkCompanyCode(){if(this.checkReady)try{this.checking=!0;const t="auth/company-validate",e=await i["b"].post(t,this.form1);if(this.checking=!1,!e)return;const{data:s}=e;this.stage=2,this.$swal({icon:"success",text:s.message})}catch(t){console.log(t),this.checking=!1}else this.$swal({icon:"error",text:"Fill all fields"})},async resendToken(){if(this.checkReady)try{this.checking=!0;const t="auth/resend-verify",e=await i["b"].post(t,this.form1);if(this.checking=!1,!e)return;const{data:s}=e;this.stage=2,this.$swal({icon:"success",text:s.message})}catch(t){console.log(t),this.checking=!1}else this.$swal({icon:"error",text:"Fill all fields"})},async checkToken(){if(this.tokenReady)try{this.verifying=!0;const t="auth/company-verify",e=await i["b"].post(t,{token:this.form2.token,companyCode:this.form1.companyCode});if(this.verifying=!1,!e)return;const{data:s}=e;this.$swal({icon:"success",text:s.message}),this.$router.push("/app")}catch(t){console.log(t),this.verifying=!1}else this.$swal({icon:"error",text:"Fill all fields"})}}},o=r,c=(s("36e0"),s("2877")),l=Object(c["a"])(o,n,a,!1,null,"cf84f050",null);e["default"]=l.exports},"7e6a":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"dash rounded px-3 pb-5 pt-2"},[e("div",{staticClass:"coln"},[e("h4",{staticClass:"mb-4"},[t._v("Create Admin Staff")]),e("div",{staticClass:"form"},[e("div",{staticClass:"mt-3"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.rsaPin,expression:"form.rsaPin"}],staticClass:"form-control input",attrs:{id:"rsaPin",type:"text",placeholder:"enter staff RSA PIN"},domProps:{value:t.form.rsaPin},on:{input:function(e){e.target.composing||t.$set(t.form,"rsaPin",e.target.value)}}})]),e("button",{staticClass:"btn mt-4 w-100 button",attrs:{disabled:!t.rsaReady||t.checking},on:{click:t.checkrsaPin}},[e("span",[t._v("Make an Admin Staff")]),t.checking?e("span",{staticClass:"spinner-border spinner-border-sm text-light ml-3",attrs:{role:"status"}}):t._e()])])])])},a=[function(){var t=this,e=t._self._c;return e("label",{staticClass:"d-flex justify-content-between",attrs:{for:"rsaPin"}},[e("span",[e("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" Staff RSA PIN ")]),e("span",{staticClass:"fs-8 text-info"},[t._v(" The staff must have registered on this platform ")])])}],i=(s("14d9"),s("f4bd")),r={name:"CreateAdminStaff",data(){return{checking:!1,verifying:!1,stage:1,form:{rsaPin:null},staff:null}},computed:{rsaReady(){return!!this.form.rsaPin}},methods:{async checkrsaPin(){if(this.rsaReady)try{this.checking=!0;const t="auth/staffs/"+this.form.rsaPin,e=await i["b"].get(t);if(this.checking=!1,!e)return;const{data:s}=e;this.staff=s.data;const n=await this.$swal({icon:"question",title:`Are you sure you want to make ${this.staff.firstName} ${this.staff.lastName} an Admin staff?`,text:"This staff will be able to perform authorized actions for this company",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No"});if(!n.isConfirmed)return;await this.makeStaff()}catch(t){console.log(t),this.checking=!1}else this.$swal({icon:"error",text:"Fill all fields"})},async makeStaff(){if(this.staff)try{this.checking=!0;const t="auth/admin-staff",e=await i["b"].post(t,this.form);if(this.checking=!1,!e)return;const{data:s}=e;this.stage=2,this.$swal({icon:"success",text:s.message})}catch(t){console.log(t),this.checking=!1}else this.$swal({icon:"error",text:"Fill all fields"})},async checkToken(){if(this.tokenReady)try{this.verifying=!0;const t="auth/company-verify",e=await i["b"].post(t,{token:this.form2.token,rsaPin:this.form.rsaPin});if(this.verifying=!1,!e)return;const{data:s}=e;this.$swal({icon:"success",text:s.message}),this.$router.push("/app")}catch(t){console.log(t),this.verifying=!1}else this.$swal({icon:"error",text:"Fill all fields"})}}},o=r,c=(s("6772"),s("2877")),l=Object(c["a"])(o,n,a,!1,null,"eaa8eda4",null);e["default"]=l.exports},dc71:function(t,e,s){},e8b5:function(t,e,s){var n=s("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},eda6:function(t,e,s){},fea9:function(t,e,s){}}]);
//# sourceMappingURL=account.64ad0b27.js.map